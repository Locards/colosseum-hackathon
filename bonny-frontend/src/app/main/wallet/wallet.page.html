<ion-content [fullscreen]="true">

  <main *ngIf="profile">

    <ion-segment [(ngModel)]="segment" >
      <ion-segment-button value="overview">
        <ion-label>Overview</ion-label>
      </ion-segment-button>
      <ion-segment-button value="history">
        <ion-label>History</ion-label>
      </ion-segment-button>
    </ion-segment>


    <section class="content">

      <ng-container [ngSwitch]="segment">

        <section *ngSwitchCase="'overview'" class="overview">

          <div class="overview-container">

            <div class="balance-container">
              <span>Balance</span>
              <h1>{{profile.tokens.toFixed(2)}}<img src="assets/logo.png"></h1>
            </div>

            <ion-item lines="none" (click)="showCoupons()">
              <ion-icon slot="start" name="qr-code-outline"></ion-icon>
              <ion-label>Activated Coupons</ion-label>
              <ion-icon slot="end" name="chevron-forward-outline"></ion-icon>
            </ion-item>

            <ion-item lines="none" (click)="showTransactions()">
              <ion-icon slot="start" name="bag-handle-outline"></ion-icon>
              <ion-label>My Purchases</ion-label>
              <ion-icon slot="end" name="chevron-forward-outline"></ion-icon>
            </ion-item>
          </div>

          <ion-button color="primary" size="large">Pay out</ion-button>

        </section>


        <section *ngSwitchCase="'history'" class="history">
          <ion-searchbar [(ngModel)]="filterText"></ion-searchbar>

          <div class="filter-container">
            <ion-chip (click)="selectFilter('all')" [color]="getFilterColor('all')">All</ion-chip>
            <ion-chip (click)="selectFilter('pending')" [color]="getFilterColor('pending')">Pending</ion-chip>
            <ion-chip (click)="selectFilter('confirmed')" [color]="getFilterColor('confirmed')">Confirmed</ion-chip>
          </div>

          <ion-list lines="none">

            <ion-item-group *ngFor="let item of getFilteredHistory()">

              <ion-item-divider>
                <ion-label>{{item.timestamp | date }}</ion-label>
              </ion-item-divider>
  
              <app-history-item *ngFor="let transaction of item.transactions" [transaction]="transaction"></app-history-item>
              
            </ion-item-group>

          </ion-list>
        </section>

      </ng-container>

    </section>

  </main>

</ion-content>
